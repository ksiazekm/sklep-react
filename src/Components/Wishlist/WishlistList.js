import React, {Component} from "react";import {Link} from "react-router-dom";class WishlistList extends Component {    constructor(props) {        super(props);        this.state = {            customerid: props.match.params.customerid,            wishlistedProducts: []        }    }    componentDidMount() {        this.getWishlistForCustomer(this.state.customerid)    }    getWishlistForCustomer(customerid){        let url = "http://localhost:9000/api/wishlist/customer/" + customerid;        fetch(url, {            mode: 'cors',            headers: {                'Accept': 'application/json',                'Content-Type': 'application/json',                'Access-Control-Allow-Origin': 'http://localhost:3000',            },            method: 'GET',        })            .then(results => {                return results.json();            }).then(data => {            data.forEach((wishitem) => {                let url = "http://localhost:9000/api/product/" + wishitem.productid                fetch(url, {                    mode: 'cors',                    headers: {                        'Accept': 'application/json',                        'Content-Type': 'application/json',                        'Access-Control-Allow-Origin': 'http://localhost:3000',                    },                    method: 'GET',                })                    .then(results => {                        return results.json();                    }).then(data => {                    let wishlist = (                        <tr key={wishitem.id}>                            <td key='Product_{data.product.id}'>                                {data.product.name}                            </td>                            <td key='remove_{data.product.id}'>                                <button className="btn btn-sm btn-secondary" onClick={() => this.handleRemove(wishitem.id)}>X</button>                            </td>                        </tr>                    )                    this.setState({wishlistedProducts: this.state.wishlistedProducts.concat(wishlist)})                })            })        })        /*            let wishlistedProducts = data.map((wishlistedProduct) => {                        return (                            <li key={wishlistedProduct.id}>                                <Link to={"/product/" + wishlistedProduct.productid}>{wishlistedProduct.productid}</Link>                            </li>                        )                    })                    this.setState({wishlistedProducts: wishlistedProducts})                })*/    }    handleRemove(wishlistid){        var url = 'http://localhost:9000/api/wishlist/' + wishlistid        fetch(url, {            method: 'DELETE',            headers: {                'Accept': 'application/json',                'Content-Type': 'application/json',            }        }).then(() => { // just dummy function - hello in JS world!            this.setState({                wishlistedProducts: [],                wishlistItemDeleted: true            })            this.getWishlistForCustomer(this.state.customerid)        });    }    render() {        return (            <div className="item-container">                <div className="container">                    <h3>Products on my wishlist</h3>                    <table>                        <tbody>                        {this.state.wishlistedProducts}                        </tbody>                    </table>                </div>                <Link to={'/wishlist/add/' + this.state.customerid}>                    <button className="btn btn-sm btn-secondary">Add Product</button>                </Link>            </div>        )    }}export default WishlistList;